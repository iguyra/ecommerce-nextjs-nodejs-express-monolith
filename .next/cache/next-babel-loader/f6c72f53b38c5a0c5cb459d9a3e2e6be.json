{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useContext } from \"react\";\nimport { AppContext } from \"../../../context/appContext\";\nimport { updateCart } from \"../../../functions\";\nimport Product from \"../../../pages/products/[product]\";\n\nconst CartItem = ({\n  product\n}) => {\n  const {\n    0: productCount,\n    1: setProductCount\n  } = useState(product.qty);\n  const {\n    0: cart,\n    1: setCart\n  } = useContext(AppContext);\n\n  const handleQtyChange = e => {\n    if (false) {\n      const newQty = e.target.value;\n      setProductCount(newQty);\n      let existingCart = localStorage.getItem(\"isavecart\");\n      existingCart = JSON.parse(existingCart);\n      const updatedCart = updateCart(existingCart, product, false, newQty);\n      setCart(updatedCart);\n    }\n  };\n\n  const handleRemoveCartItem = e => {\n    const itemToBeRemoved = e.target;\n    const itemToBeRemovedId = itemToBeRemoved.id;\n    const item = document.getElementById(itemToBeRemovedId); // const elementParent = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode.parentNode;\n    // const element = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode;\n    // elementParent.removeChild(element);\n    // console.log(\"itemToBeRemoved\", elementParent, item, element);\n\n    let existingCart = localStorage.getItem(\"isavecart\");\n    existingCart = JSON.parse(existingCart);\n    const itemIndex = existingCart.products.findIndex(product => product._id === itemToBeRemovedId);\n\n    if (-1 < itemIndex) {\n      let updatedCart = existingCart;\n      const productToBeRemoved = existingCart.products[itemIndex];\n      const itemToBeRemovedQty = +productToBeRemoved.qty;\n      const itemToBeRemovedPrice = +productToBeRemoved.totalPrice;\n      updatedCart.totalProductsCount = updatedCart.totalProductsCount - itemToBeRemovedQty;\n      updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - itemToBeRemovedPrice;\n      updatedCart.products.splice(itemIndex, 1);\n      localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n      setCart(updatedCart);\n      console.log(updatedCart, itemToBeRemovedPrice, itemToBeRemovedPrice, \"updatedCart\");\n    } // updatedCart.products.splice(itemIndex, 1);\n    // console.log(updatedCart, existingCart);\n    // setCart(updatedCart);\n    // localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n\n  };\n\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: /*#__PURE__*/_jsx(\"section\", {\n      className: \"cart0\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"cartitem\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"cartitem__top\",\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: product.image,\n            alt: \"\",\n            className: \"cartitem__img\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__details\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__productname\",\n              children: product.name\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__size\",\n              children: \"size: one size fits all\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.price]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.totalPrice]\n            })]\n          })]\n        }, product.productId), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"cartitem__bottom\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__control\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"far fa-heart\"\n            }), /*#__PURE__*/_jsx(\"i\", {\n              onClick: handleRemoveCartItem,\n              id: product._id,\n              className: \"fas fa-trash-alt\",\n              children: \"remove\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__incdes\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--dec\",\n              children: \"-\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              onChange: handleQtyChange,\n              className: \"cartitem__qunatity cartitem__qunatity--number\",\n              value: productCount\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--inc\",\n              children: \"+\"\n            })]\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport default CartItem;","map":null,"metadata":{},"sourceType":"module"}