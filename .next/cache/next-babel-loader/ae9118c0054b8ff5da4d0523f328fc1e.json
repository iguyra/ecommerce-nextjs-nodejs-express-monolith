{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\isave\\\\components\\\\cart\\\\cartpage\\\\CartItem.js\";\nimport React, { useState, useContext } from \"react\";\nimport { AppContext } from \"../../../context/appContext\";\nimport { updateCart } from \"../../../functions\";\nimport Product from \"../../../pages/products/[product]\";\n\nconst CartItem = ({\n  product\n}) => {\n  const {\n    0: productCount,\n    1: setProductCount\n  } = useState(product.qty);\n  const {\n    0: cart,\n    1: setCart\n  } = useContext(AppContext);\n\n  const handleQtyChange = e => {\n    if (false) {\n      const newQty = e.target.value;\n      setProductCount(newQty);\n      let existingCart = localStorage.getItem(\"isavecart\");\n      existingCart = JSON.parse(existingCart);\n      const updatedCart = updateCart(existingCart, product, false, newQty);\n      setCart(updatedCart);\n    }\n  };\n\n  const handleRemoveCartItem = e => {\n    const itemToBeRemoved = e.target;\n    const itemToBeRemovedId = +itemToBeRemoved.id;\n    const item = document.getElementById(itemToBeRemovedId);\n    const elementParent = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode.parentNode;\n    const element = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode;\n    elementParent.removeChild(element);\n    console.log(\"itemToBeRemoved\", elementParent, item, element);\n    let existingCart = localStorage.getItem(\"isavecart\");\n    existingCart = JSON.parse(existingCart);\n    const itemIndex = existingCart.products.findIndex(product => {\n      return product._id === itemToBeRemovedId;\n    });\n\n    if (-1 < itemIndex) {\n      let updatedCart = existingCart;\n      const productToBeRemoved = existingCart.products[itemIndex];\n      const itemToBeRemovedQty = +productToBeRemoved.qty;\n      const itemToBeRemovedPrice = +productToBeRemoved.totalPrice;\n      updatedCart.totalProductsCount = updatedCart.totalProductsCount - itemToBeRemovedQty;\n      updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - itemToBeRemovedPrice;\n      updatedCart.products.splice(itemIndex, 1);\n      localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n      setCart(updatedCart);\n      console.log(updatedCart, itemToBeRemovedPrice, itemToBeRemovedPrice, \"updatedCart\");\n    }\n\n    console.log(\"ousited\", itemToBeRemovedId, itemIndex, existingCart); // updatedCart.products.splice(itemIndex, 1);\n    // console.log(updatedCart, existingCart);\n    // setCart(updatedCart);\n    // localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cart0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartitem\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartitem__top\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.image,\n            alt: \"\",\n            className: \"cartitem__img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cartitem__details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__productname\",\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__size\",\n              children: \"size: one size fits all\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.totalPrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, product.productId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartitem__bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cartitem__control\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"far fa-heart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              onClick: handleRemoveCartItem,\n              id: product._id,\n              className: \"fas fa-trash-alt\",\n              children: \"remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cartitem__incdes\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--dec\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              onChange: handleQtyChange,\n              className: \"cartitem__qunatity cartitem__qunatity--number\",\n              value: productCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--inc\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\nexport default CartItem;","map":{"version":3,"sources":["C:/Users/USER/Desktop/isave/components/cart/cartpage/CartItem.js"],"names":["React","useState","useContext","AppContext","updateCart","Product","CartItem","product","productCount","setProductCount","qty","cart","setCart","handleQtyChange","e","newQty","target","value","existingCart","localStorage","getItem","JSON","parse","updatedCart","handleRemoveCartItem","itemToBeRemoved","itemToBeRemovedId","id","item","document","getElementById","elementParent","parentNode","element","removeChild","console","log","itemIndex","products","findIndex","_id","productToBeRemoved","itemToBeRemovedQty","itemToBeRemovedPrice","totalPrice","totalProductsCount","totalProductsPrice","splice","setItem","stringify","image","name","price","productId"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { AppContext } from \"../../../context/appContext\";\r\nimport { updateCart } from \"../../../functions\";\r\nimport Product from \"../../../pages/products/[product]\";\r\n\r\nconst CartItem = ({ product }) => {\r\n  const [productCount, setProductCount] = useState(product.qty);\r\n  const [cart, setCart] = useContext(AppContext);\r\n\r\n  const handleQtyChange = (e) => {\r\n    if (process.browser) {\r\n      const newQty = e.target.value;\r\n      setProductCount(newQty);\r\n\r\n      let existingCart = localStorage.getItem(\"isavecart\");\r\n      existingCart = JSON.parse(existingCart);\r\n\r\n      const updatedCart = updateCart(existingCart, product, false, newQty);\r\n\r\n      setCart(updatedCart);\r\n    }\r\n  };\r\n\r\n  const handleRemoveCartItem = (e) => {\r\n    const itemToBeRemoved = e.target;\r\n    const itemToBeRemovedId = +itemToBeRemoved.id;\r\n    const item = document.getElementById(itemToBeRemovedId);\r\n\r\n    const elementParent = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode.parentNode;\r\n\r\n    const element = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode;\r\n\r\n    elementParent.removeChild(element);\r\n\r\n    console.log(\"itemToBeRemoved\", elementParent, item, element);\r\n\r\n    let existingCart = localStorage.getItem(\"isavecart\");\r\n    existingCart = JSON.parse(existingCart);\r\n\r\n    const itemIndex = existingCart.products.findIndex((product) => {\r\n      return product._id === itemToBeRemovedId;\r\n    });\r\n\r\n    if (-1 < itemIndex) {\r\n      let updatedCart = existingCart;\r\n\r\n      const productToBeRemoved = existingCart.products[itemIndex];\r\n\r\n      const itemToBeRemovedQty = +productToBeRemoved.qty;\r\n      const itemToBeRemovedPrice = +productToBeRemoved.totalPrice;\r\n\r\n      updatedCart.totalProductsCount = updatedCart.totalProductsCount - itemToBeRemovedQty;\r\n      updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - itemToBeRemovedPrice;\r\n\r\n      updatedCart.products.splice(itemIndex, 1);\r\n\r\n      localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\r\n      setCart(updatedCart);\r\n\r\n      console.log(updatedCart, itemToBeRemovedPrice, itemToBeRemovedPrice, \"updatedCart\");\r\n    }\r\n\r\n    console.log(\"ousited\", itemToBeRemovedId, itemIndex, existingCart);\r\n    // updatedCart.products.splice(itemIndex, 1);\r\n\r\n    // console.log(updatedCart, existingCart);\r\n\r\n    // setCart(updatedCart);\r\n    // localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <section className=\"cart0\">\r\n        <div className=\"cartitem\">\r\n          <div key={product.productId} className=\"cartitem__top\">\r\n            <img src={product.image} alt=\"\" className=\"cartitem__img\" />\r\n            <div className=\"cartitem__details\">\r\n              <p className=\"cartitem__productname\">{product.name}</p>\r\n              <p className=\"cartitem__size\">size: one size fits all</p>\r\n              <p className=\"cartitem__price\">GH {product.price}</p>\r\n              <p className=\"cartitem__price\">GH {product.totalPrice}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"cartitem__bottom\">\r\n            <div className=\"cartitem__control\">\r\n              <i className=\"far fa-heart\"></i>\r\n              <i onClick={handleRemoveCartItem} id={product._id} className=\"fas fa-trash-alt\">\r\n                remove\r\n              </i>\r\n            </div>\r\n            <div className=\"cartitem__incdes\">\r\n              <p className=\"cartitem__qunatity cartitem__qunatity--dec\">-</p>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                onChange={handleQtyChange}\r\n                className=\"cartitem__qunatity cartitem__qunatity--number\"\r\n                value={productCount}\r\n              />\r\n              <p className=\"cartitem__qunatity cartitem__qunatity--inc\">+</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n"]},"metadata":{},"sourceType":"module"}