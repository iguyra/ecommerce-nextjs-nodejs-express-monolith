{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useContext } from \"react\";\nimport { AppContext } from \"../../../context/appContext\";\nimport { updateCart } from \"../../../functions\";\nimport Product from \"../../../pages/products/[product]\";\n\nvar CartItem = function CartItem(_ref) {\n  var product = _ref.product;\n\n  var _useState = useState(product.qty),\n      productCount = _useState[0],\n      setProductCount = _useState[1];\n\n  var _useContext = useContext(AppContext),\n      cart = _useContext[0],\n      setCart = _useContext[1];\n\n  var handleQtyChange = function handleQtyChange(e) {\n    if (true) {\n      var newQty = e.target.value;\n      setProductCount(newQty);\n      var existingCart = localStorage.getItem(\"isavecart\");\n      existingCart = JSON.parse(existingCart);\n      var updatedCart = updateCart(existingCart, product, false, newQty);\n      setCart(updatedCart);\n    }\n  };\n\n  var handleRemoveCartItem = function handleRemoveCartItem(e) {\n    var itemToBeRemoved = e.target;\n    var itemToBeRemovedId = itemToBeRemoved.id;\n    var item = document.getElementById(itemToBeRemovedId); // const elementParent = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode.parentNode;\n    // const element = itemToBeRemoved.parentNode.parentNode.parentNode.parentNode;\n    // elementParent.removeChild(element);\n    // console.log(\"itemToBeRemoved\", elementParent, item, element);\n\n    var existingCart = localStorage.getItem(\"isavecart\");\n    existingCart = JSON.parse(existingCart);\n    var itemIndex = existingCart.products.findIndex(function (product) {\n      return product._id === itemToBeRemovedId;\n    });\n\n    if (-1 < itemIndex) {\n      var updatedCart = existingCart;\n      var productToBeRemoved = existingCart.products[itemIndex];\n      var itemToBeRemovedQty = +productToBeRemoved.qty;\n      var itemToBeRemovedPrice = +productToBeRemoved.totalPrice;\n      updatedCart.totalProductsCount = updatedCart.totalProductsCount - itemToBeRemovedQty;\n      updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - itemToBeRemovedPrice;\n      updatedCart.products.splice(itemIndex, 1);\n      localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n      setCart(updatedCart);\n      console.log(updatedCart, itemToBeRemovedPrice, itemToBeRemovedPrice, \"updatedCart\");\n    } // updatedCart.products.splice(itemIndex, 1);\n    // console.log(updatedCart, existingCart);\n    // setCart(updatedCart);\n    // localStorage.setItem(\"isavecart\", JSON.stringify(updatedCart));\n\n  };\n\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: /*#__PURE__*/_jsx(\"section\", {\n      className: \"cart0\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"cartitem\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"cartitem__top\",\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: product.image,\n            alt: \"\",\n            className: \"cartitem__img\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__details\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__productname\",\n              children: product.name\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__size\",\n              children: \"size: one size fits all\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.price]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: \"cartitem__price\",\n              children: [\"GH \", product.totalPrice]\n            })]\n          })]\n        }, product.productId), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"cartitem__bottom\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__control\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"far fa-heart\"\n            }), /*#__PURE__*/_jsx(\"i\", {\n              onClick: handleRemoveCartItem,\n              id: product._id,\n              className: \"fas fa-trash-alt\",\n              children: \"remove\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"cartitem__incdes\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--dec\",\n              children: \"-\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              onChange: handleQtyChange,\n              className: \"cartitem__qunatity cartitem__qunatity--number\",\n              value: productCount\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"cartitem__qunatity cartitem__qunatity--inc\",\n              children: \"+\"\n            })]\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport default CartItem;","map":null,"metadata":{},"sourceType":"module"}